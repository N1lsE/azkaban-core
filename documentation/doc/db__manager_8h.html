<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Azkaban Core: include/db_manager.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Azkaban Core<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('db__manager_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">db_manager.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Database management functions for Azkaban Core.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="entry_8h_source.html">entry.h</a>&quot;</code><br />
<code>#include &lt;sqlcipher/sqlite3.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for db_manager.h:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h__incl.png" border="0" usemap="#ainclude_2db__manager_8h" alt=""/></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h__dep__incl.png" border="0" usemap="#ainclude_2db__manager_8hdep" alt=""/></div>
</div>
</div>
<p><a href="db__manager_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1b0fe9c9dcda4cf034bb1f634f31848a" id="r_a1b0fe9c9dcda4cf034bb1f634f31848a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1b0fe9c9dcda4cf034bb1f634f31848a">SQLITE_HAS_CODEC</a></td></tr>
<tr class="separator:a1b0fe9c9dcda4cf034bb1f634f31848a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae07af262c608d2e3de291268d923d24a" id="r_ae07af262c608d2e3de291268d923d24a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae07af262c608d2e3de291268d923d24a">db_close</a> (sqlite3 *db)</td></tr>
<tr class="memdesc:ae07af262c608d2e3de291268d923d24a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the database connection.  <br /></td></tr>
<tr class="separator:ae07af262c608d2e3de291268d923d24a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a9d473f8758bb940884b65a067fe33e" id="r_a3a9d473f8758bb940884b65a067fe33e"><td class="memItemLeft" align="right" valign="top">sqlite3 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3a9d473f8758bb940884b65a067fe33e">db_open</a> (const char *filename, const char *password)</td></tr>
<tr class="memdesc:a3a9d473f8758bb940884b65a067fe33e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens a database connection with a password.  <br /></td></tr>
<tr class="separator:a3a9d473f8758bb940884b65a067fe33e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27d7ae2f91fe9eab048c401a30f3954f" id="r_a27d7ae2f91fe9eab048c401a30f3954f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a27d7ae2f91fe9eab048c401a30f3954f">_db_create_table</a> (sqlite3 *db, const char *sql_statement)</td></tr>
<tr class="memdesc:a27d7ae2f91fe9eab048c401a30f3954f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a table in the database. For internal use.  <br /></td></tr>
<tr class="separator:a27d7ae2f91fe9eab048c401a30f3954f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14c52d471dcea73205f58108b05f79be" id="r_a14c52d471dcea73205f58108b05f79be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a14c52d471dcea73205f58108b05f79be">_db_setup</a> (sqlite3 *db)</td></tr>
<tr class="memdesc:a14c52d471dcea73205f58108b05f79be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up the initial database schema. For internal use.  <br /></td></tr>
<tr class="separator:a14c52d471dcea73205f58108b05f79be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad73addfafde9aff845004160c21b653a" id="r_ad73addfafde9aff845004160c21b653a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structEntryNode.html">EntryNode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad73addfafde9aff845004160c21b653a">db_get_all_entries</a> (sqlite3 *db)</td></tr>
<tr class="memdesc:ad73addfafde9aff845004160c21b653a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves all entries from the database without password.  <br /></td></tr>
<tr class="separator:ad73addfafde9aff845004160c21b653a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad687fdae2666de5b3bbab9c618e7531" id="r_aad687fdae2666de5b3bbab9c618e7531"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structEntry.html">Entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aad687fdae2666de5b3bbab9c618e7531">db_get_entry</a> (sqlite3 *db, char *name)</td></tr>
<tr class="memdesc:aad687fdae2666de5b3bbab9c618e7531"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a single entry by name without password.  <br /></td></tr>
<tr class="separator:aad687fdae2666de5b3bbab9c618e7531"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eec20b712b31d944c0177c2f7bef826" id="r_a9eec20b712b31d944c0177c2f7bef826"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structEntryDetailNode.html">EntryDetailNode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9eec20b712b31d944c0177c2f7bef826">db_get_all_entryDetail</a> (sqlite3 *db, int from_entry_id)</td></tr>
<tr class="memdesc:a9eec20b712b31d944c0177c2f7bef826"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves all details of an entry.  <br /></td></tr>
<tr class="separator:a9eec20b712b31d944c0177c2f7bef826"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f8576ec6f779d0c10d3accba4e2dbab" id="r_a9f8576ec6f779d0c10d3accba4e2dbab"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9f8576ec6f779d0c10d3accba4e2dbab">db_get_password</a> (sqlite3 *db, int id)</td></tr>
<tr class="memdesc:a9f8576ec6f779d0c10d3accba4e2dbab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the password for a specific entry.  <br /></td></tr>
<tr class="separator:a9f8576ec6f779d0c10d3accba4e2dbab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0c43fd7714cf7f5faddbc71d1066240" id="r_ab0c43fd7714cf7f5faddbc71d1066240"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab0c43fd7714cf7f5faddbc71d1066240">db_change_entry</a> (sqlite3 *db, int entry_id, <a class="el" href="structEntry.html">Entry</a> new_entry)</td></tr>
<tr class="memdesc:ab0c43fd7714cf7f5faddbc71d1066240"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates an existing entry in the database.  <br /></td></tr>
<tr class="separator:ab0c43fd7714cf7f5faddbc71d1066240"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a922067346bbcd03409a560ed504f6c05" id="r_a922067346bbcd03409a560ed504f6c05"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a922067346bbcd03409a560ed504f6c05">db_change_entryDetail</a> (sqlite3 *db, int id, <a class="el" href="structEntryDetail.html">EntryDetail</a> new_entry_detail)</td></tr>
<tr class="memdesc:a922067346bbcd03409a560ed504f6c05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates an existing entry detail in the database.  <br /></td></tr>
<tr class="separator:a922067346bbcd03409a560ed504f6c05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37529c9085cd64ba970e70b928628603" id="r_a37529c9085cd64ba970e70b928628603"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a37529c9085cd64ba970e70b928628603">db_write_entry</a> (sqlite3 *db, <a class="el" href="structEntry.html">Entry</a> entry)</td></tr>
<tr class="memdesc:a37529c9085cd64ba970e70b928628603"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a new entry into the database.  <br /></td></tr>
<tr class="separator:a37529c9085cd64ba970e70b928628603"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5930f7e3021559ebf5286dea58ee64fb" id="r_a5930f7e3021559ebf5286dea58ee64fb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5930f7e3021559ebf5286dea58ee64fb">db_write_entryDetail</a> (sqlite3 *db, <a class="el" href="structEntryDetail.html">EntryDetail</a> entry_detail)</td></tr>
<tr class="memdesc:a5930f7e3021559ebf5286dea58ee64fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a new entry detail into the database.  <br /></td></tr>
<tr class="separator:a5930f7e3021559ebf5286dea58ee64fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a726ed3755008e6be0d44228abb850469" id="r_a726ed3755008e6be0d44228abb850469"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a726ed3755008e6be0d44228abb850469">db_delete_entry</a> (sqlite3 *db, int entry_id)</td></tr>
<tr class="memdesc:a726ed3755008e6be0d44228abb850469"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes an entry from the database.  <br /></td></tr>
<tr class="separator:a726ed3755008e6be0d44228abb850469"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbb55635ef8a5e8b1ffcd557be443dd3" id="r_acbb55635ef8a5e8b1ffcd557be443dd3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acbb55635ef8a5e8b1ffcd557be443dd3">db_delete_entryDetail</a> (sqlite3 *db, int entry_detail_id)</td></tr>
<tr class="memdesc:acbb55635ef8a5e8b1ffcd557be443dd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes an entry detail from the database.  <br /></td></tr>
<tr class="separator:acbb55635ef8a5e8b1ffcd557be443dd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c6e86cfb23f9a4c08076e51c214a64c" id="r_a4c6e86cfb23f9a4c08076e51c214a64c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c6e86cfb23f9a4c08076e51c214a64c">db_add_to_folder</a> (sqlite3 *db, int entry_id, char *folder_name)</td></tr>
<tr class="memdesc:a4c6e86cfb23f9a4c08076e51c214a64c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds an entry to a specific folder in the database.  <br /></td></tr>
<tr class="separator:a4c6e86cfb23f9a4c08076e51c214a64c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9f26662f3488427e61a7e27b3aee354" id="r_ab9f26662f3488427e61a7e27b3aee354"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structFolderNode.html">FolderNode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab9f26662f3488427e61a7e27b3aee354">db_get_all_folder</a> (sqlite3 *db)</td></tr>
<tr class="memdesc:ab9f26662f3488427e61a7e27b3aee354"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves all folders from the database.  <br /></td></tr>
<tr class="separator:ab9f26662f3488427e61a7e27b3aee354"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d52b2e3080f09a32bfb18916a183763" id="r_a3d52b2e3080f09a32bfb18916a183763"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structFolderNode.html">FolderNode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3d52b2e3080f09a32bfb18916a183763">db_get_from_folder</a> (sqlite3 *db, char *folder_name)</td></tr>
<tr class="memdesc:a3d52b2e3080f09a32bfb18916a183763"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves entries from a specific folder.  <br /></td></tr>
<tr class="separator:a3d52b2e3080f09a32bfb18916a183763"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a858521d290aceedd44233a156c7d9ec2" id="r_a858521d290aceedd44233a156c7d9ec2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a858521d290aceedd44233a156c7d9ec2">_db_decrypt</a> (sqlite3 *db, const char *password)</td></tr>
<tr class="memdesc:a858521d290aceedd44233a156c7d9ec2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrypts the database using the provided password.  <br /></td></tr>
<tr class="separator:a858521d290aceedd44233a156c7d9ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Database management functions for Azkaban Core. </p>
<p>This header provides the API for managing SQLite databases, including CRUD operations for entries, entry details, and folders. It also includes encryption and setup utilities. </p>

<p class="definition">Definition in file <a class="el" href="db__manager_8h_source.html">db_manager.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a1b0fe9c9dcda4cf034bb1f634f31848a" name="a1b0fe9c9dcda4cf034bb1f634f31848a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b0fe9c9dcda4cf034bb1f634f31848a">&#9670;&#160;</a></span>SQLITE_HAS_CODEC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SQLITE_HAS_CODEC</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="db__manager_8h_source.html#l00013">13</a> of file <a class="el" href="db__manager_8h_source.html">db_manager.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a27d7ae2f91fe9eab048c401a30f3954f" name="a27d7ae2f91fe9eab048c401a30f3954f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27d7ae2f91fe9eab048c401a30f3954f">&#9670;&#160;</a></span>_db_create_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _db_create_table </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>sql_statement</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a table in the database. For internal use. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Pointer to the SQLite database connection. </td></tr>
    <tr><td class="paramname">sql_statement</td><td>SQL statement to create the table. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="db__manager_8c_source.html#l00347">347</a> of file <a class="el" href="db__manager_8c_source.html">db_manager.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  347</span>                                                              {</div>
<div class="line"><span class="lineno">  348</span>  <span class="keywordtype">char</span> *zErrMsg = 0;</div>
<div class="line"><span class="lineno">  349</span>  <span class="keywordtype">int</span> rc = sqlite3_exec(db, sql_statement, <a class="code hl_function" href="db__manager_8c.html#ae5029c6714b7b77296aa2096b846b6be">callback</a>, 0, &amp;zErrMsg);</div>
<div class="line"><span class="lineno">  350</span>  <span class="keywordflow">if</span> (rc) {</div>
<div class="line"><span class="lineno">  351</span>    fprintf(stderr, <span class="stringliteral">&quot;failed to create table: %s\n&quot;</span>, sqlite3_errmsg(db));</div>
<div class="line"><span class="lineno">  352</span>    exit(EXIT_FAILURE);</div>
<div class="line"><span class="lineno">  353</span>  }</div>
<div class="line"><span class="lineno">  354</span>}</div>
<div class="ttc" id="adb__manager_8c_html_ae5029c6714b7b77296aa2096b846b6be"><div class="ttname"><a href="db__manager_8c.html#ae5029c6714b7b77296aa2096b846b6be">callback</a></div><div class="ttdeci">static int callback(void *NotUsed, int argc, char **argv, char **azColName)</div><div class="ttdef"><b>Definition</b> <a href="db__manager_8c_source.html#l00338">db_manager.c:338</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h_a27d7ae2f91fe9eab048c401a30f3954f_cgraph.png" border="0" usemap="#adb__manager_8h_a27d7ae2f91fe9eab048c401a30f3954f_cgraph" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h_a27d7ae2f91fe9eab048c401a30f3954f_icgraph.png" border="0" usemap="#adb__manager_8h_a27d7ae2f91fe9eab048c401a30f3954f_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a858521d290aceedd44233a156c7d9ec2" name="a858521d290aceedd44233a156c7d9ec2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a858521d290aceedd44233a156c7d9ec2">&#9670;&#160;</a></span>_db_decrypt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _db_decrypt </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>password</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decrypts the database using the provided password. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Pointer to the SQLite database connection. </td></tr>
    <tr><td class="paramname">password</td><td>Password used for decryption. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="db__manager_8c_source.html#l00390">390</a> of file <a class="el" href="db__manager_8c_source.html">db_manager.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  390</span>                                                    {</div>
<div class="line"><span class="lineno">  391</span>  <span class="keywordtype">int</span> rc = sqlite3_key(db, password, strlen(password));</div>
<div class="line"><span class="lineno">  392</span>  <span class="keywordflow">if</span> (rc != SQLITE_OK) {</div>
<div class="line"><span class="lineno">  393</span>    fprintf(stderr, <span class="stringliteral">&quot;sqlite3_key failed!\n&quot;</span>);</div>
<div class="line"><span class="lineno">  394</span>    sqlite3_close(db);</div>
<div class="line"><span class="lineno">  395</span>    exit(EXIT_FAILURE);</div>
<div class="line"><span class="lineno">  396</span>  }</div>
<div class="line"><span class="lineno">  397</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h_a858521d290aceedd44233a156c7d9ec2_icgraph.png" border="0" usemap="#adb__manager_8h_a858521d290aceedd44233a156c7d9ec2_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a14c52d471dcea73205f58108b05f79be" name="a14c52d471dcea73205f58108b05f79be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14c52d471dcea73205f58108b05f79be">&#9670;&#160;</a></span>_db_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _db_setup </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up the initial database schema. For internal use. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Pointer to the SQLite database connection. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="db__manager_8c_source.html#l00356">356</a> of file <a class="el" href="db__manager_8c_source.html">db_manager.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  356</span>                            {</div>
<div class="line"><span class="lineno">  357</span>  <span class="keywordtype">char</span> *stmt;</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>  <span class="comment">/* create Entry table */</span></div>
<div class="line"><span class="lineno">  360</span>  stmt = <span class="stringliteral">&quot;CREATE TABLE IF NOT EXISTS Entry(&quot;</span></div>
<div class="line"><span class="lineno">  361</span>         <span class="stringliteral">&quot;id INTEGER PRIMARY KEY,&quot;</span></div>
<div class="line"><span class="lineno">  362</span>         <span class="stringliteral">&quot;name  VARCHAR(50)   NOT NULL,&quot;</span></div>
<div class="line"><span class="lineno">  363</span>         <span class="stringliteral">&quot;user_name VARCHAR(50),&quot;</span></div>
<div class="line"><span class="lineno">  364</span>         <span class="stringliteral">&quot;password VARCHAR(50),&quot;</span></div>
<div class="line"><span class="lineno">  365</span>         <span class="stringliteral">&quot;is_deleted INTEGER DEFAULT 0);&quot;</span>;</div>
<div class="line"><span class="lineno">  366</span>  <a class="code hl_function" href="db__manager_8c.html#a27d7ae2f91fe9eab048c401a30f3954f">_db_create_table</a>(db, stmt);</div>
<div class="line"><span class="lineno">  367</span> </div>
<div class="line"><span class="lineno">  368</span>  <span class="comment">/* create EntryDetails table */</span></div>
<div class="line"><span class="lineno">  369</span>  stmt = <span class="stringliteral">&quot;CREATE TABLE IF NOT EXISTS EntryDetails(&quot;</span></div>
<div class="line"><span class="lineno">  370</span>         <span class="stringliteral">&quot;id INTEGER PRIMARY KEY,&quot;</span></div>
<div class="line"><span class="lineno">  371</span>         <span class="stringliteral">&quot;f_entry_id INT,&quot;</span></div>
<div class="line"><span class="lineno">  372</span>         <span class="stringliteral">&quot;type TEXT,&quot;</span></div>
<div class="line"><span class="lineno">  373</span>         <span class="stringliteral">&quot;content BLOB,&quot;</span></div>
<div class="line"><span class="lineno">  374</span>         <span class="stringliteral">&quot;size INT,&quot;</span></div>
<div class="line"><span class="lineno">  375</span>         <span class="stringliteral">&quot;is_deleted INTEGER DEFAULT 0,&quot;</span></div>
<div class="line"><span class="lineno">  376</span>         <span class="stringliteral">&quot;FOREIGN KEY(f_entry_id) REFERENCES Entry(id)&quot;</span></div>
<div class="line"><span class="lineno">  377</span>         <span class="stringliteral">&quot;);&quot;</span>;</div>
<div class="line"><span class="lineno">  378</span>  <a class="code hl_function" href="db__manager_8c.html#a27d7ae2f91fe9eab048c401a30f3954f">_db_create_table</a>(db, stmt);</div>
<div class="line"><span class="lineno">  379</span> </div>
<div class="line"><span class="lineno">  380</span>  <span class="comment">/* create Folders table */</span></div>
<div class="line"><span class="lineno">  381</span>  stmt = <span class="stringliteral">&quot;CREATE TABLE IF NOT EXISTS Folders(&quot;</span></div>
<div class="line"><span class="lineno">  382</span>         <span class="stringliteral">&quot;name VARCHAR(5),&quot;</span></div>
<div class="line"><span class="lineno">  383</span>         <span class="stringliteral">&quot;f_entry_id INT,&quot;</span></div>
<div class="line"><span class="lineno">  384</span>         <span class="stringliteral">&quot;PRIMARY KEY (name, f_entry_id),&quot;</span></div>
<div class="line"><span class="lineno">  385</span>         <span class="stringliteral">&quot;FOREIGN KEY(f_entry_id) REFERENCES Entry(id)&quot;</span></div>
<div class="line"><span class="lineno">  386</span>         <span class="stringliteral">&quot;);&quot;</span>;</div>
<div class="line"><span class="lineno">  387</span>  <a class="code hl_function" href="db__manager_8c.html#a27d7ae2f91fe9eab048c401a30f3954f">_db_create_table</a>(db, stmt);</div>
<div class="line"><span class="lineno">  388</span>}</div>
<div class="ttc" id="adb__manager_8c_html_a27d7ae2f91fe9eab048c401a30f3954f"><div class="ttname"><a href="db__manager_8c.html#a27d7ae2f91fe9eab048c401a30f3954f">_db_create_table</a></div><div class="ttdeci">void _db_create_table(sqlite3 *db, const char *sql_statement)</div><div class="ttdoc">Creates a table in the database. For internal use.</div><div class="ttdef"><b>Definition</b> <a href="db__manager_8c_source.html#l00347">db_manager.c:347</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h_a14c52d471dcea73205f58108b05f79be_cgraph.png" border="0" usemap="#adb__manager_8h_a14c52d471dcea73205f58108b05f79be_cgraph" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h_a14c52d471dcea73205f58108b05f79be_icgraph.png" border="0" usemap="#adb__manager_8h_a14c52d471dcea73205f58108b05f79be_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a4c6e86cfb23f9a4c08076e51c214a64c" name="a4c6e86cfb23f9a4c08076e51c214a64c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c6e86cfb23f9a4c08076e51c214a64c">&#9670;&#160;</a></span>db_add_to_folder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int db_add_to_folder </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>entry_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>folder_name</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds an entry to a specific folder in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Pointer to the SQLite database connection. </td></tr>
    <tr><td class="paramname">entry_id</td><td>ID of the entry to add. </td></tr>
    <tr><td class="paramname">folder_name</td><td>Name of the folder. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="db__manager_8c_source.html#l00035">35</a> of file <a class="el" href="db__manager_8c_source.html">db_manager.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   35</span>                                                                   {</div>
<div class="line"><span class="lineno">   36</span>  sqlite3_stmt *stmt;</div>
<div class="line"><span class="lineno">   37</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *sql = <span class="stringliteral">&quot;INSERT INTO Folders(name, f_entry_id) VALUES (?, ?);&quot;</span>;</div>
<div class="line"><span class="lineno">   38</span>  <span class="keywordtype">int</span> rc;</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>  rc = sqlite3_prepare_v2(db, sql, -1, &amp;stmt, 0);</div>
<div class="line"><span class="lineno">   41</span>  <span class="keywordflow">if</span> (rc != SQLITE_OK) {</div>
<div class="line"><span class="lineno">   42</span>    fprintf(stderr, <span class="stringliteral">&quot;Failed to prepare statement: %s\n&quot;</span>, sqlite3_errmsg(db));</div>
<div class="line"><span class="lineno">   43</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   44</span>  }</div>
<div class="line"><span class="lineno">   45</span> </div>
<div class="line"><span class="lineno">   46</span>  sqlite3_bind_int(stmt, 1, entry_id);</div>
<div class="line"><span class="lineno">   47</span>  sqlite3_bind_text(stmt, 2, folder_name, -1, SQLITE_TRANSIENT);</div>
<div class="line"><span class="lineno">   48</span> </div>
<div class="line"><span class="lineno">   49</span>  rc = sqlite3_step(stmt);</div>
<div class="line"><span class="lineno">   50</span>  <span class="keywordflow">if</span> (rc != SQLITE_DONE) {</div>
<div class="line"><span class="lineno">   51</span>    fprintf(stderr, <span class="stringliteral">&quot;Failed to execute statment: %s\n&quot;</span>, sqlite3_errmsg(db));</div>
<div class="line"><span class="lineno">   52</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   53</span>  }</div>
<div class="line"><span class="lineno">   54</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   55</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab0c43fd7714cf7f5faddbc71d1066240" name="ab0c43fd7714cf7f5faddbc71d1066240"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0c43fd7714cf7f5faddbc71d1066240">&#9670;&#160;</a></span>db_change_entry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int db_change_entry </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>entry_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structEntry.html">Entry</a></td>          <td class="paramname"><span class="paramname"><em>new_entry</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates an existing entry in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Pointer to the SQLite database connection. </td></tr>
    <tr><td class="paramname">entry_id</td><td>ID of the entry to update. </td></tr>
    <tr><td class="paramname">new_entry</td><td>Struct containing updated entry data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="db__manager_8c_source.html#l00215">215</a> of file <a class="el" href="db__manager_8c_source.html">db_manager.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  215</span>                                                                {</div>
<div class="line"><span class="lineno">  216</span>  <a class="code hl_struct" href="structEntryDetailNode.html">EntryDetailNode</a> *entry_detail_list = <a class="code hl_function" href="db__manager_8c.html#a9eec20b712b31d944c0177c2f7bef826">db_get_all_entryDetail</a>(db, entry_id);</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>  <span class="comment">// write new entry</span></div>
<div class="line"><span class="lineno">  219</span>  <a class="code hl_function" href="db__manager_8c.html#a37529c9085cd64ba970e70b928628603">db_write_entry</a>(db, new_entry);</div>
<div class="line"><span class="lineno">  220</span>  <a class="code hl_struct" href="structEntry.html">Entry</a> *new_entry_from_get = <a class="code hl_function" href="db__manager_8c.html#aad687fdae2666de5b3bbab9c618e7531">db_get_entry</a>(db, new_entry.<a class="code hl_variable" href="structEntry.html#a272e382d3efed5f970c7939742ec9603">name</a>);</div>
<div class="line"><span class="lineno">  221</span>  <span class="keywordtype">int</span> new_entry_id = new_entry_from_get-&gt;<a class="code hl_variable" href="structEntry.html#aa5d205a77ff70e820e536617e4ee480d">id</a>;</div>
<div class="line"><span class="lineno">  222</span>  printf(<span class="stringliteral">&quot;%d\n&quot;</span>, new_entry_id);</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>  <span class="comment">// write entryDetails to new entry</span></div>
<div class="line"><span class="lineno">  225</span>  <a class="code hl_struct" href="structEntryDetailNode.html">EntryDetailNode</a> *current = entry_detail_list;</div>
<div class="line"><span class="lineno">  226</span>  <span class="keywordflow">while</span> (current != NULL) {</div>
<div class="line"><span class="lineno">  227</span>    current-&gt;<a class="code hl_variable" href="structEntryDetailNode.html#a6c26b8061561f684aca2e7aa331f3a2c">data</a>.<a class="code hl_variable" href="structEntryDetail.html#a849f762b05ab750c52d3ab44a9ad9388">f_entry_id</a> = new_entry_id;</div>
<div class="line"><span class="lineno">  228</span>    current-&gt;<a class="code hl_variable" href="structEntryDetailNode.html#a6c26b8061561f684aca2e7aa331f3a2c">data</a>.<a class="code hl_variable" href="structEntryDetail.html#ad3978edac40ab48b0e1167a755559f02">id</a> = -1;</div>
<div class="line"><span class="lineno">  229</span>    <a class="code hl_function" href="db__manager_8c.html#a5930f7e3021559ebf5286dea58ee64fb">db_write_entryDetail</a>(db, current-&gt;<a class="code hl_variable" href="structEntryDetailNode.html#a6c26b8061561f684aca2e7aa331f3a2c">data</a>);</div>
<div class="line"><span class="lineno">  230</span>    current = current-&gt;<a class="code hl_variable" href="structEntryDetailNode.html#ae96dbb6754ea73dc5c1909a15230b4af">next</a>;</div>
<div class="line"><span class="lineno">  231</span>  }</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>  <span class="comment">// succsessful written, now delete</span></div>
<div class="line"><span class="lineno">  234</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="db__manager_8c.html#a726ed3755008e6be0d44228abb850469">db_delete_entry</a>(db, entry_id) == 1) {</div>
<div class="line"><span class="lineno">  235</span>    fprintf(stderr, <span class="stringliteral">&quot;Failed to delete&quot;</span>);</div>
<div class="line"><span class="lineno">  236</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  237</span>  }</div>
<div class="line"><span class="lineno">  238</span>  current = entry_detail_list;</div>
<div class="line"><span class="lineno">  239</span>  <span class="keywordflow">while</span> (current != NULL) {</div>
<div class="line"><span class="lineno">  240</span>    <a class="code hl_function" href="db__manager_8c.html#acbb55635ef8a5e8b1ffcd557be443dd3">db_delete_entryDetail</a>(db, current-&gt;<a class="code hl_variable" href="structEntryDetailNode.html#a6c26b8061561f684aca2e7aa331f3a2c">data</a>.<a class="code hl_variable" href="structEntryDetail.html#ad3978edac40ab48b0e1167a755559f02">id</a>);</div>
<div class="line"><span class="lineno">  241</span>    current = current-&gt;<a class="code hl_variable" href="structEntryDetailNode.html#ae96dbb6754ea73dc5c1909a15230b4af">next</a>;</div>
<div class="line"><span class="lineno">  242</span>  }</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  245</span>}</div>
<div class="ttc" id="adb__manager_8c_html_a37529c9085cd64ba970e70b928628603"><div class="ttname"><a href="db__manager_8c.html#a37529c9085cd64ba970e70b928628603">db_write_entry</a></div><div class="ttdeci">int db_write_entry(sqlite3 *db, Entry entry)</div><div class="ttdoc">Writes a new entry into the database.</div><div class="ttdef"><b>Definition</b> <a href="db__manager_8c_source.html#l00150">db_manager.c:150</a></div></div>
<div class="ttc" id="adb__manager_8c_html_a5930f7e3021559ebf5286dea58ee64fb"><div class="ttname"><a href="db__manager_8c.html#a5930f7e3021559ebf5286dea58ee64fb">db_write_entryDetail</a></div><div class="ttdeci">int db_write_entryDetail(sqlite3 *db, EntryDetail entry_detail)</div><div class="ttdoc">Writes a new entry detail into the database.</div><div class="ttdef"><b>Definition</b> <a href="db__manager_8c_source.html#l00111">db_manager.c:111</a></div></div>
<div class="ttc" id="adb__manager_8c_html_a726ed3755008e6be0d44228abb850469"><div class="ttname"><a href="db__manager_8c.html#a726ed3755008e6be0d44228abb850469">db_delete_entry</a></div><div class="ttdeci">int db_delete_entry(sqlite3 *db, int entry_id)</div><div class="ttdoc">Deletes an entry from the database.</div><div class="ttdef"><b>Definition</b> <a href="db__manager_8c_source.html#l00085">db_manager.c:85</a></div></div>
<div class="ttc" id="adb__manager_8c_html_a9eec20b712b31d944c0177c2f7bef826"><div class="ttname"><a href="db__manager_8c.html#a9eec20b712b31d944c0177c2f7bef826">db_get_all_entryDetail</a></div><div class="ttdeci">EntryDetailNode * db_get_all_entryDetail(sqlite3 *db, int from_entry_id)</div><div class="ttdoc">Retrieves all details of an entry.</div><div class="ttdef"><b>Definition</b> <a href="db__manager_8c_source.html#l00267">db_manager.c:267</a></div></div>
<div class="ttc" id="adb__manager_8c_html_aad687fdae2666de5b3bbab9c618e7531"><div class="ttname"><a href="db__manager_8c.html#aad687fdae2666de5b3bbab9c618e7531">db_get_entry</a></div><div class="ttdeci">Entry * db_get_entry(sqlite3 *db, char *name)</div><div class="ttdoc">Retrieves a single entry by name without password.</div><div class="ttdef"><b>Definition</b> <a href="db__manager_8c_source.html#l00182">db_manager.c:182</a></div></div>
<div class="ttc" id="adb__manager_8c_html_acbb55635ef8a5e8b1ffcd557be443dd3"><div class="ttname"><a href="db__manager_8c.html#acbb55635ef8a5e8b1ffcd557be443dd3">db_delete_entryDetail</a></div><div class="ttdeci">int db_delete_entryDetail(sqlite3 *db, int entry_detail_id)</div><div class="ttdoc">Deletes an entry detail from the database.</div><div class="ttdef"><b>Definition</b> <a href="db__manager_8c_source.html#l00057">db_manager.c:57</a></div></div>
<div class="ttc" id="astructEntryDetailNode_html"><div class="ttname"><a href="structEntryDetailNode.html">EntryDetailNode</a></div><div class="ttdoc">Node structure for linked lists of EntryDetail.</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00119">entry.h:119</a></div></div>
<div class="ttc" id="astructEntryDetailNode_html_a6c26b8061561f684aca2e7aa331f3a2c"><div class="ttname"><a href="structEntryDetailNode.html#a6c26b8061561f684aca2e7aa331f3a2c">EntryDetailNode::data</a></div><div class="ttdeci">EntryDetail data</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00120">entry.h:120</a></div></div>
<div class="ttc" id="astructEntryDetailNode_html_ae96dbb6754ea73dc5c1909a15230b4af"><div class="ttname"><a href="structEntryDetailNode.html#ae96dbb6754ea73dc5c1909a15230b4af">EntryDetailNode::next</a></div><div class="ttdeci">struct EntryDetailNode * next</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00121">entry.h:121</a></div></div>
<div class="ttc" id="astructEntryDetail_html_a849f762b05ab750c52d3ab44a9ad9388"><div class="ttname"><a href="structEntryDetail.html#a849f762b05ab750c52d3ab44a9ad9388">EntryDetail::f_entry_id</a></div><div class="ttdeci">int f_entry_id</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00107">entry.h:107</a></div></div>
<div class="ttc" id="astructEntryDetail_html_ad3978edac40ab48b0e1167a755559f02"><div class="ttname"><a href="structEntryDetail.html#ad3978edac40ab48b0e1167a755559f02">EntryDetail::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00106">entry.h:106</a></div></div>
<div class="ttc" id="astructEntry_html"><div class="ttname"><a href="structEntry.html">Entry</a></div><div class="ttdoc">Represents a database entry.</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00011">entry.h:11</a></div></div>
<div class="ttc" id="astructEntry_html_a272e382d3efed5f970c7939742ec9603"><div class="ttname"><a href="structEntry.html#a272e382d3efed5f970c7939742ec9603">Entry::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00013">entry.h:13</a></div></div>
<div class="ttc" id="astructEntry_html_aa5d205a77ff70e820e536617e4ee480d"><div class="ttname"><a href="structEntry.html#aa5d205a77ff70e820e536617e4ee480d">Entry::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00012">entry.h:12</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h_ab0c43fd7714cf7f5faddbc71d1066240_cgraph.png" border="0" usemap="#adb__manager_8h_ab0c43fd7714cf7f5faddbc71d1066240_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a922067346bbcd03409a560ed504f6c05" name="a922067346bbcd03409a560ed504f6c05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a922067346bbcd03409a560ed504f6c05">&#9670;&#160;</a></span>db_change_entryDetail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int db_change_entryDetail </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structEntryDetail.html">EntryDetail</a></td>          <td class="paramname"><span class="paramname"><em>new_entry_detail</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates an existing entry detail in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Pointer to the SQLite database connection. </td></tr>
    <tr><td class="paramname">id</td><td>ID of the entry detail to update. </td></tr>
    <tr><td class="paramname">new_entry_detail</td><td>Struct containing updated entry detail data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero on failure. </dd></dl>

</div>
</div>
<a id="ae07af262c608d2e3de291268d923d24a" name="ae07af262c608d2e3de291268d923d24a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae07af262c608d2e3de291268d923d24a">&#9670;&#160;</a></span>db_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void db_close </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes the database connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Pointer to the SQLite database connection. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="db__manager_8c_source.html#l00416">416</a> of file <a class="el" href="db__manager_8c_source.html">db_manager.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  416</span>{ sqlite3_close(db); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a726ed3755008e6be0d44228abb850469" name="a726ed3755008e6be0d44228abb850469"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a726ed3755008e6be0d44228abb850469">&#9670;&#160;</a></span>db_delete_entry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int db_delete_entry </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>entry_id</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes an entry from the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Pointer to the SQLite database connection. </td></tr>
    <tr><td class="paramname">entry_id</td><td>ID of the entry to delete. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="db__manager_8c_source.html#l00085">85</a> of file <a class="el" href="db__manager_8c_source.html">db_manager.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   85</span>                                               {</div>
<div class="line"><span class="lineno">   86</span>  <a class="code hl_struct" href="structEntryDetailNode.html">EntryDetailNode</a> *entry_details_list = <a class="code hl_function" href="db__manager_8c.html#a9eec20b712b31d944c0177c2f7bef826">db_get_all_entryDetail</a>(db, entry_id);</div>
<div class="line"><span class="lineno">   87</span>  <a class="code hl_function" href="entry_8h.html#ab1b4472642be16440d29bbcbf55ac457">entryDetail_list_itterate_function</a>(</div>
<div class="line"><span class="lineno">   88</span>      entry_details_list, <a class="code hl_function" href="db__manager_8c.html#ab0b8674090b9bc7f70fe235dc048b626">callback_delete_entry_details_of_entry</a>, db);</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>  <span class="comment">// Delete Entry</span></div>
<div class="line"><span class="lineno">   91</span>  sqlite3_stmt *stmt;</div>
<div class="line"><span class="lineno">   92</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *sql = <span class="stringliteral">&quot;UPDATE Entry SET is_deleted = 1 WHERE id = ?;&quot;</span>;</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>  <span class="keywordflow">if</span> (sqlite3_prepare_v2(db, sql, -1, &amp;stmt, 0) != SQLITE_OK) {</div>
<div class="line"><span class="lineno">   95</span>    fprintf(stderr, <span class="stringliteral">&quot;Failed to prepare statement\n&quot;</span>);</div>
<div class="line"><span class="lineno">   96</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   97</span>  }</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>  sqlite3_bind_int(stmt, 1, entry_id);</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>  <span class="keywordflow">if</span> (sqlite3_step(stmt) != SQLITE_DONE) {</div>
<div class="line"><span class="lineno">  102</span>    fprintf(stderr, <span class="stringliteral">&quot;Execution failed: %s\n&quot;</span>, sqlite3_errmsg(db));</div>
<div class="line"><span class="lineno">  103</span>    sqlite3_finalize(stmt);</div>
<div class="line"><span class="lineno">  104</span>    <span class="keywordflow">return</span> 1-;</div>
<div class="line"><span class="lineno">  105</span>  }</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>  sqlite3_finalize(stmt);</div>
<div class="line"><span class="lineno">  108</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  109</span>}</div>
<div class="ttc" id="adb__manager_8c_html_ab0b8674090b9bc7f70fe235dc048b626"><div class="ttname"><a href="db__manager_8c.html#ab0b8674090b9bc7f70fe235dc048b626">callback_delete_entry_details_of_entry</a></div><div class="ttdeci">void * callback_delete_entry_details_of_entry(void *db, EntryDetail entry_detail)</div><div class="ttdef"><b>Definition</b> <a href="db__manager_8c_source.html#l00079">db_manager.c:79</a></div></div>
<div class="ttc" id="aentry_8h_html_ab1b4472642be16440d29bbcbf55ac457"><div class="ttname"><a href="entry_8h.html#ab1b4472642be16440d29bbcbf55ac457">entryDetail_list_itterate_function</a></div><div class="ttdeci">void entryDetail_list_itterate_function(EntryDetailNode *head, void *callback(void *parameter, EntryDetail entry_detail), void *parameter_first_given_to_callback)</div><div class="ttdoc">Iterates over the entry detail list and applies a callback function.</div><div class="ttdef"><b>Definition</b> <a href="entry_8c_source.html#l00082">entry.c:82</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h_a726ed3755008e6be0d44228abb850469_cgraph.png" border="0" usemap="#adb__manager_8h_a726ed3755008e6be0d44228abb850469_cgraph" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h_a726ed3755008e6be0d44228abb850469_icgraph.png" border="0" usemap="#adb__manager_8h_a726ed3755008e6be0d44228abb850469_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="acbb55635ef8a5e8b1ffcd557be443dd3" name="acbb55635ef8a5e8b1ffcd557be443dd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbb55635ef8a5e8b1ffcd557be443dd3">&#9670;&#160;</a></span>db_delete_entryDetail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int db_delete_entryDetail </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>entry_detail_id</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes an entry detail from the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Pointer to the SQLite database connection. </td></tr>
    <tr><td class="paramname">entry_detail_id</td><td>ID of the entry detail to delete. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="db__manager_8c_source.html#l00057">57</a> of file <a class="el" href="db__manager_8c_source.html">db_manager.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   57</span>                                                            {</div>
<div class="line"><span class="lineno">   58</span>  <span class="comment">// Delete Entry</span></div>
<div class="line"><span class="lineno">   59</span>  sqlite3_stmt *stmt;</div>
<div class="line"><span class="lineno">   60</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *sql = <span class="stringliteral">&quot;UPDATE EntryDetails SET is_deleted = 1 WHERE id = ?;&quot;</span>;</div>
<div class="line"><span class="lineno">   61</span> </div>
<div class="line"><span class="lineno">   62</span>  <span class="keywordflow">if</span> (sqlite3_prepare_v2(db, sql, -1, &amp;stmt, 0) != SQLITE_OK) {</div>
<div class="line"><span class="lineno">   63</span>    fprintf(stderr, <span class="stringliteral">&quot;Failed to prepare statement\n&quot;</span>);</div>
<div class="line"><span class="lineno">   64</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   65</span>  }</div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>  sqlite3_bind_int(stmt, 1, entry_detail_id);</div>
<div class="line"><span class="lineno">   68</span> </div>
<div class="line"><span class="lineno">   69</span>  <span class="keywordflow">if</span> (sqlite3_step(stmt) != SQLITE_DONE) {</div>
<div class="line"><span class="lineno">   70</span>    fprintf(stderr, <span class="stringliteral">&quot;Execution failed: %s\n&quot;</span>, sqlite3_errmsg(db));</div>
<div class="line"><span class="lineno">   71</span>    sqlite3_finalize(stmt);</div>
<div class="line"><span class="lineno">   72</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   73</span>  }</div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="line"><span class="lineno">   75</span>  sqlite3_finalize(stmt);</div>
<div class="line"><span class="lineno">   76</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   77</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h_acbb55635ef8a5e8b1ffcd557be443dd3_icgraph.png" border="0" usemap="#adb__manager_8h_acbb55635ef8a5e8b1ffcd557be443dd3_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="ad73addfafde9aff845004160c21b653a" name="ad73addfafde9aff845004160c21b653a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad73addfafde9aff845004160c21b653a">&#9670;&#160;</a></span>db_get_all_entries()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structEntryNode.html">EntryNode</a> * db_get_all_entries </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves all entries from the database without password. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Pointer to the SQLite database connection. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a linked list of <a class="el" href="structEntryNode.html" title="Linked list node for Entry structures.">EntryNode</a> structures. </dd></dl>

<p class="definition">Definition at line <a class="el" href="db__manager_8c_source.html#l00325">325</a> of file <a class="el" href="db__manager_8c_source.html">db_manager.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  325</span>                                           {</div>
<div class="line"><span class="lineno">  326</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *stmt = <span class="stringliteral">&quot;SELECT id, name, user_name FROM Entry WHERE is_deleted = &quot;</span></div>
<div class="line"><span class="lineno">  327</span>                     <span class="stringliteral">&quot;0 ORDER BY id DESC;&quot;</span>;</div>
<div class="line"><span class="lineno">  328</span>  <span class="keywordtype">char</span> *zErrMsg = 0;</div>
<div class="line"><span class="lineno">  329</span>  <a class="code hl_struct" href="structEntryNode.html">EntryNode</a> *entry_list = <a class="code hl_function" href="entry_8h.html#ab3592f3c949af954b6d77702183052dc">entry_list_init</a>();</div>
<div class="line"><span class="lineno">  330</span>  <span class="keywordflow">if</span> (sqlite3_exec(db, stmt, <a class="code hl_function" href="db__manager_8c.html#af4cb9f20d8f5ae0dd4d3188741f0497f">_create_entries</a>, &amp;entry_list, &amp;zErrMsg) !=</div>
<div class="line"><span class="lineno">  331</span>      SQLITE_OK) {</div>
<div class="line"><span class="lineno">  332</span>    fprintf(stderr, <span class="stringliteral">&quot;SQL error: %s\n&quot;</span>, zErrMsg);</div>
<div class="line"><span class="lineno">  333</span>    sqlite3_free(zErrMsg);</div>
<div class="line"><span class="lineno">  334</span>  }</div>
<div class="line"><span class="lineno">  335</span>  <span class="keywordflow">return</span> entry_list;</div>
<div class="line"><span class="lineno">  336</span>}</div>
<div class="ttc" id="adb__manager_8c_html_af4cb9f20d8f5ae0dd4d3188741f0497f"><div class="ttname"><a href="db__manager_8c.html#af4cb9f20d8f5ae0dd4d3188741f0497f">_create_entries</a></div><div class="ttdeci">static int _create_entries(void *entries_linked_list, int argc, char **argv, char **azColName)</div><div class="ttdef"><b>Definition</b> <a href="db__manager_8c_source.html#l00311">db_manager.c:311</a></div></div>
<div class="ttc" id="aentry_8h_html_ab3592f3c949af954b6d77702183052dc"><div class="ttname"><a href="entry_8h.html#ab3592f3c949af954b6d77702183052dc">entry_list_init</a></div><div class="ttdeci">EntryNode * entry_list_init(void)</div><div class="ttdoc">Initializes an entry list.</div><div class="ttdef"><b>Definition</b> <a href="entry_8c_source.html#l00037">entry.c:37</a></div></div>
<div class="ttc" id="astructEntryNode_html"><div class="ttname"><a href="structEntryNode.html">EntryNode</a></div><div class="ttdoc">Linked list node for Entry structures.</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00023">entry.h:23</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h_ad73addfafde9aff845004160c21b653a_cgraph.png" border="0" usemap="#adb__manager_8h_ad73addfafde9aff845004160c21b653a_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a9eec20b712b31d944c0177c2f7bef826" name="a9eec20b712b31d944c0177c2f7bef826"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9eec20b712b31d944c0177c2f7bef826">&#9670;&#160;</a></span>db_get_all_entryDetail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structEntryDetailNode.html">EntryDetailNode</a> * db_get_all_entryDetail </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>from_entry_id</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves all details of an entry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Pointer to the SQLite database connection. </td></tr>
    <tr><td class="paramname">from_entry_id</td><td>ID of the entry. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a linked list of <a class="el" href="structEntryDetailNode.html" title="Node structure for linked lists of EntryDetail.">EntryDetailNode</a> structures. </dd></dl>

<p class="definition">Definition at line <a class="el" href="db__manager_8c_source.html#l00267">267</a> of file <a class="el" href="db__manager_8c_source.html">db_manager.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  267</span>                                                                        {</div>
<div class="line"><span class="lineno">  268</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *sql = <span class="stringliteral">&quot;SELECT id, type, content, size FROM EntryDetails WHERE &quot;</span></div>
<div class="line"><span class="lineno">  269</span>                    <span class="stringliteral">&quot;f_entry_id = ? AND is_deleted = 0 ORDER BY id DESC;&quot;</span>;</div>
<div class="line"><span class="lineno">  270</span>  <span class="keywordtype">char</span> *zErrMsg = 0;</div>
<div class="line"><span class="lineno">  271</span>  <a class="code hl_struct" href="structEntryDetailNode.html">EntryDetailNode</a> *entry_details_list = <a class="code hl_function" href="entry_8h.html#ab40f6f33fd436d1ab3ae427b629c59d3">entryDetail_list_init</a>();</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>  sqlite3_stmt *stmt;</div>
<div class="line"><span class="lineno">  274</span>  <span class="keywordflow">if</span> (sqlite3_prepare_v2(db, sql, -1, &amp;stmt, 0) != SQLITE_OK) {</div>
<div class="line"><span class="lineno">  275</span>    fprintf(stderr, <span class="stringliteral">&quot;Failed to prepare statement\n&quot;</span>);</div>
<div class="line"><span class="lineno">  276</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  277</span>  }</div>
<div class="line"><span class="lineno">  278</span> </div>
<div class="line"><span class="lineno">  279</span>  sqlite3_bind_int(stmt, 1, from_entry_id);</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>  <span class="keywordflow">while</span> (sqlite3_step(stmt) == SQLITE_ROW) {</div>
<div class="line"><span class="lineno">  282</span>    <span class="keywordtype">int</span> <span class="keywordtype">id</span> = sqlite3_column_int(stmt, 0);</div>
<div class="line"><span class="lineno">  283</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *type = (<span class="keyword">const</span> <span class="keywordtype">char</span> *)sqlite3_column_text(stmt, 1);</div>
<div class="line"><span class="lineno">  284</span>    <span class="keyword">const</span> <span class="keywordtype">void</span> *content = sqlite3_column_blob(stmt, 2);</div>
<div class="line"><span class="lineno">  285</span>    <span class="keywordtype">int</span> size = sqlite3_column_int(stmt, 3);</div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>    <a class="code hl_struct" href="structEntryDetail.html">EntryDetail</a> entry_detail;</div>
<div class="line"><span class="lineno">  288</span>    entry_detail.<a class="code hl_variable" href="structEntryDetail.html#ad3978edac40ab48b0e1167a755559f02">id</a> = id;</div>
<div class="line"><span class="lineno">  289</span>    entry_detail.<a class="code hl_variable" href="structEntryDetail.html#a849f762b05ab750c52d3ab44a9ad9388">f_entry_id</a> = from_entry_id;</div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span>    <a class="code hl_struct" href="structIContent.html">IContent</a> *i_content = (<a class="code hl_struct" href="structIContent.html">IContent</a> *)malloc(<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structIContent.html">IContent</a>));</div>
<div class="line"><span class="lineno">  292</span>    i_content-&gt;<a class="code hl_variable" href="structIContent.html#ad6f9f3b297b4804b8b9e02554675725b">type</a> = strdup(type);</div>
<div class="line"><span class="lineno">  293</span>    i_content-&gt;<a class="code hl_variable" href="structIContent.html#a513f3c5719119ae574904849b127bad0">size</a> = size;</div>
<div class="line"><span class="lineno">  294</span> </div>
<div class="line"><span class="lineno">  295</span>    <span class="keywordflow">if</span> (strcmp(i_content-&gt;<a class="code hl_variable" href="structIContent.html#ad6f9f3b297b4804b8b9e02554675725b">type</a>, <span class="stringliteral">&quot;text&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno">  296</span>      i_content-&gt;<a class="code hl_variable" href="structIContent.html#a4ab57de965cd12f71014fa3d2178a613">data</a>.<a class="code hl_variable" href="structIContent.html#a513b32028efdf180f944ec78b8127ee2">text</a> = strdup(content);</div>
<div class="line"><span class="lineno">  297</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  298</span>      i_content-&gt;<a class="code hl_variable" href="structIContent.html#a4ab57de965cd12f71014fa3d2178a613">data</a>.<a class="code hl_variable" href="structIContent.html#ab65571882f3ddf0ecfdfcb514f56bba8">blob</a> = malloc(i_content-&gt;<a class="code hl_variable" href="structIContent.html#a513f3c5719119ae574904849b127bad0">size</a>);</div>
<div class="line"><span class="lineno">  299</span>      memcpy(i_content-&gt;<a class="code hl_variable" href="structIContent.html#a4ab57de965cd12f71014fa3d2178a613">data</a>.<a class="code hl_variable" href="structIContent.html#ab65571882f3ddf0ecfdfcb514f56bba8">blob</a>, content, i_content-&gt;<a class="code hl_variable" href="structIContent.html#a513f3c5719119ae574904849b127bad0">size</a>);</div>
<div class="line"><span class="lineno">  300</span>    }</div>
<div class="line"><span class="lineno">  301</span> </div>
<div class="line"><span class="lineno">  302</span>    entry_detail.<a class="code hl_variable" href="structEntryDetail.html#aa6efdde7252c152b9715663ae222b74e">content</a> = i_content;</div>
<div class="line"><span class="lineno">  303</span>    <a class="code hl_function" href="entry_8h.html#aa628e62902b21d65d06c997abddbd921">entryDetail_list_prepend_item</a>(&amp;entry_details_list, entry_detail);</div>
<div class="line"><span class="lineno">  304</span>  }</div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>  sqlite3_finalize(stmt);</div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span>  <span class="keywordflow">return</span> entry_details_list;</div>
<div class="line"><span class="lineno">  309</span>}</div>
<div class="ttc" id="aentry_8h_html_aa628e62902b21d65d06c997abddbd921"><div class="ttname"><a href="entry_8h.html#aa628e62902b21d65d06c997abddbd921">entryDetail_list_prepend_item</a></div><div class="ttdeci">void entryDetail_list_prepend_item(EntryDetailNode **head, EntryDetail entry_detail)</div><div class="ttdoc">Prepends a new entry detail to the list.</div><div class="ttdef"><b>Definition</b> <a href="entry_8c_source.html#l00070">entry.c:70</a></div></div>
<div class="ttc" id="aentry_8h_html_ab40f6f33fd436d1ab3ae427b629c59d3"><div class="ttname"><a href="entry_8h.html#ab40f6f33fd436d1ab3ae427b629c59d3">entryDetail_list_init</a></div><div class="ttdeci">EntryDetailNode * entryDetail_list_init(void)</div><div class="ttdoc">Initializes a new entry detail list.</div><div class="ttdef"><b>Definition</b> <a href="entry_8c_source.html#l00069">entry.c:69</a></div></div>
<div class="ttc" id="astructEntryDetail_html"><div class="ttname"><a href="structEntryDetail.html">EntryDetail</a></div><div class="ttdoc">Represents detailed information associated with an entry.</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00105">entry.h:105</a></div></div>
<div class="ttc" id="astructEntryDetail_html_aa6efdde7252c152b9715663ae222b74e"><div class="ttname"><a href="structEntryDetail.html#aa6efdde7252c152b9715663ae222b74e">EntryDetail::content</a></div><div class="ttdeci">IContent * content</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00108">entry.h:108</a></div></div>
<div class="ttc" id="astructIContent_html"><div class="ttname"><a href="structIContent.html">IContent</a></div><div class="ttdoc">Represents content that can either be text or binary data.</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00089">entry.h:89</a></div></div>
<div class="ttc" id="astructIContent_html_a4ab57de965cd12f71014fa3d2178a613"><div class="ttname"><a href="structIContent.html#a4ab57de965cd12f71014fa3d2178a613">IContent::data</a></div><div class="ttdeci">union IContent::@173235212010331071076060032234164356237132006371 data</div></div>
<div class="ttc" id="astructIContent_html_a513b32028efdf180f944ec78b8127ee2"><div class="ttname"><a href="structIContent.html#a513b32028efdf180f944ec78b8127ee2">IContent::text</a></div><div class="ttdeci">char * text</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00092">entry.h:92</a></div></div>
<div class="ttc" id="astructIContent_html_a513f3c5719119ae574904849b127bad0"><div class="ttname"><a href="structIContent.html#a513f3c5719119ae574904849b127bad0">IContent::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00095">entry.h:95</a></div></div>
<div class="ttc" id="astructIContent_html_ab65571882f3ddf0ecfdfcb514f56bba8"><div class="ttname"><a href="structIContent.html#ab65571882f3ddf0ecfdfcb514f56bba8">IContent::blob</a></div><div class="ttdeci">void * blob</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00093">entry.h:93</a></div></div>
<div class="ttc" id="astructIContent_html_ad6f9f3b297b4804b8b9e02554675725b"><div class="ttname"><a href="structIContent.html#ad6f9f3b297b4804b8b9e02554675725b">IContent::type</a></div><div class="ttdeci">char * type</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00090">entry.h:90</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h_a9eec20b712b31d944c0177c2f7bef826_cgraph.png" border="0" usemap="#adb__manager_8h_a9eec20b712b31d944c0177c2f7bef826_cgraph" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h_a9eec20b712b31d944c0177c2f7bef826_icgraph.png" border="0" usemap="#adb__manager_8h_a9eec20b712b31d944c0177c2f7bef826_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="ab9f26662f3488427e61a7e27b3aee354" name="ab9f26662f3488427e61a7e27b3aee354"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9f26662f3488427e61a7e27b3aee354">&#9670;&#160;</a></span>db_get_all_folder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structFolderNode.html">FolderNode</a> * db_get_all_folder </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves all folders from the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Pointer to the SQLite database connection. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a linked list of <a class="el" href="structFolderNode.html" title="Represents a folder in the database.">FolderNode</a> structures. </dd></dl>

<p class="definition">Definition at line <a class="el" href="db__manager_8c_source.html#l00014">14</a> of file <a class="el" href="db__manager_8c_source.html">db_manager.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   14</span>                                           {</div>
<div class="line"><span class="lineno">   15</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *sql = <span class="stringliteral">&quot;SELECT DISTINCT name FROM Folders;&quot;</span>;</div>
<div class="line"><span class="lineno">   16</span>  <span class="keywordtype">char</span> *zErrMsg = 0;</div>
<div class="line"><span class="lineno">   17</span>  <a class="code hl_struct" href="structFolderNode.html">FolderNode</a> *folders = <a class="code hl_function" href="entry_8h.html#acd86166889d12c0d0d409ca2a1a9274b">folder_list_init</a>();</div>
<div class="line"><span class="lineno">   18</span> </div>
<div class="line"><span class="lineno">   19</span>  sqlite3_stmt *stmt;</div>
<div class="line"><span class="lineno">   20</span>  <span class="keywordflow">if</span> (sqlite3_prepare_v2(db, sql, -1, &amp;stmt, 0) != SQLITE_OK) {</div>
<div class="line"><span class="lineno">   21</span>    fprintf(stderr, <span class="stringliteral">&quot;Failed to prepare statement\n&quot;</span>);</div>
<div class="line"><span class="lineno">   22</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">   23</span>  }</div>
<div class="line"><span class="lineno">   24</span> </div>
<div class="line"><span class="lineno">   25</span>  <span class="keywordflow">while</span> (sqlite3_step(stmt) == SQLITE_ROW) {</div>
<div class="line"><span class="lineno">   26</span>    <span class="keywordtype">char</span> *folder_n = (<span class="keywordtype">char</span> *)sqlite3_column_text(stmt, 0);</div>
<div class="line"><span class="lineno">   27</span>    <a class="code hl_function" href="entry_8h.html#aee652344315fc0fc4d58de84eac82480">folder_list_prepent</a>(&amp;folders, strdup(folder_n));</div>
<div class="line"><span class="lineno">   28</span>  }</div>
<div class="line"><span class="lineno">   29</span> </div>
<div class="line"><span class="lineno">   30</span>  sqlite3_finalize(stmt);</div>
<div class="line"><span class="lineno">   31</span> </div>
<div class="line"><span class="lineno">   32</span>  <span class="keywordflow">return</span> folders;</div>
<div class="line"><span class="lineno">   33</span>}</div>
<div class="ttc" id="aentry_8h_html_acd86166889d12c0d0d409ca2a1a9274b"><div class="ttname"><a href="entry_8h.html#acd86166889d12c0d0d409ca2a1a9274b">folder_list_init</a></div><div class="ttdeci">FolderNode * folder_list_init(void)</div><div class="ttdoc">Initializes a new folder list.</div><div class="ttdef"><b>Definition</b> <a href="entry_8c_source.html#l00004">entry.c:4</a></div></div>
<div class="ttc" id="aentry_8h_html_aee652344315fc0fc4d58de84eac82480"><div class="ttname"><a href="entry_8h.html#aee652344315fc0fc4d58de84eac82480">folder_list_prepent</a></div><div class="ttdeci">void folder_list_prepent(FolderNode **head, char *folder_name)</div><div class="ttdoc">Prepends a new folder to the list.</div><div class="ttdef"><b>Definition</b> <a href="entry_8c_source.html#l00005">entry.c:5</a></div></div>
<div class="ttc" id="astructFolderNode_html"><div class="ttname"><a href="structFolderNode.html">FolderNode</a></div><div class="ttdoc">Represents a folder in the database.</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00166">entry.h:166</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h_ab9f26662f3488427e61a7e27b3aee354_cgraph.png" border="0" usemap="#adb__manager_8h_ab9f26662f3488427e61a7e27b3aee354_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="aad687fdae2666de5b3bbab9c618e7531" name="aad687fdae2666de5b3bbab9c618e7531"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad687fdae2666de5b3bbab9c618e7531">&#9670;&#160;</a></span>db_get_entry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structEntry.html">Entry</a> * db_get_entry </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>name</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves a single entry by name without password. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Pointer to the SQLite database connection. </td></tr>
    <tr><td class="paramname">name</td><td>Name of the entry. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to an <a class="el" href="structEntry.html" title="Represents a database entry.">Entry</a> structure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="db__manager_8c_source.html#l00182">182</a> of file <a class="el" href="db__manager_8c_source.html">db_manager.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  182</span>                                             {</div>
<div class="line"><span class="lineno">  183</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *stmt =</div>
<div class="line"><span class="lineno">  184</span>      <span class="stringliteral">&quot;SELECT id, name, user_name FROM Entry WHERE name = ? ORDER BY id DESC;&quot;</span>;</div>
<div class="line"><span class="lineno">  185</span>  sqlite3_stmt *res;</div>
<div class="line"><span class="lineno">  186</span>  <a class="code hl_struct" href="structEntry.html">Entry</a> *entry = malloc(<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structEntry.html">Entry</a>));</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>  <span class="keywordflow">if</span> (entry == NULL) {</div>
<div class="line"><span class="lineno">  189</span>    fprintf(stderr, <span class="stringliteral">&quot;Memory allocation failed\n&quot;</span>);</div>
<div class="line"><span class="lineno">  190</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  191</span>  }</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>  <span class="keywordtype">int</span> rc = sqlite3_prepare_v2(db, stmt, -1, &amp;res, 0);</div>
<div class="line"><span class="lineno">  194</span>  <span class="keywordflow">if</span> (rc != SQLITE_OK) {</div>
<div class="line"><span class="lineno">  195</span>    fprintf(stderr, <span class="stringliteral">&quot;Failed to prepare statement\n&quot;</span>);</div>
<div class="line"><span class="lineno">  196</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  197</span>  }</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>  sqlite3_bind_text(res, 1, name, -1, NULL);</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>  rc = sqlite3_step(res);</div>
<div class="line"><span class="lineno">  202</span>  <span class="keywordflow">if</span> (rc == SQLITE_ROW) {</div>
<div class="line"><span class="lineno">  203</span>    entry-&gt;<a class="code hl_variable" href="structEntry.html#aa5d205a77ff70e820e536617e4ee480d">id</a> = sqlite3_column_int(res, 0);</div>
<div class="line"><span class="lineno">  204</span>    entry-&gt;<a class="code hl_variable" href="structEntry.html#a272e382d3efed5f970c7939742ec9603">name</a> = strdup((<span class="keywordtype">char</span> *)sqlite3_column_text(res, 1));</div>
<div class="line"><span class="lineno">  205</span>    entry-&gt;<a class="code hl_variable" href="structEntry.html#a73f44a1b396afac536575508c8b8e062">user_name</a> = strdup((<span class="keywordtype">char</span> *)sqlite3_column_text(res, 2));</div>
<div class="line"><span class="lineno">  206</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  207</span>    free(entry);</div>
<div class="line"><span class="lineno">  208</span>    entry = NULL;</div>
<div class="line"><span class="lineno">  209</span>  }</div>
<div class="line"><span class="lineno">  210</span> </div>
<div class="line"><span class="lineno">  211</span>  sqlite3_finalize(res);</div>
<div class="line"><span class="lineno">  212</span>  <span class="keywordflow">return</span> entry;</div>
<div class="line"><span class="lineno">  213</span>}</div>
<div class="ttc" id="astructEntry_html_a73f44a1b396afac536575508c8b8e062"><div class="ttname"><a href="structEntry.html#a73f44a1b396afac536575508c8b8e062">Entry::user_name</a></div><div class="ttdeci">char * user_name</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00014">entry.h:14</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h_aad687fdae2666de5b3bbab9c618e7531_icgraph.png" border="0" usemap="#adb__manager_8h_aad687fdae2666de5b3bbab9c618e7531_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a3d52b2e3080f09a32bfb18916a183763" name="a3d52b2e3080f09a32bfb18916a183763"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d52b2e3080f09a32bfb18916a183763">&#9670;&#160;</a></span>db_get_from_folder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structFolderNode.html">FolderNode</a> * db_get_from_folder </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>folder_name</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves entries from a specific folder. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Pointer to the SQLite database connection. </td></tr>
    <tr><td class="paramname">folder_name</td><td>Name of the folder. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a linked list of <a class="el" href="structFolderNode.html" title="Represents a folder in the database.">FolderNode</a> structures containing the folder's entries. </dd></dl>

</div>
</div>
<a id="a9f8576ec6f779d0c10d3accba4e2dbab" name="a9f8576ec6f779d0c10d3accba4e2dbab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f8576ec6f779d0c10d3accba4e2dbab">&#9670;&#160;</a></span>db_get_password()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * db_get_password </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>id</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the password for a specific entry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Pointer to the SQLite database connection. </td></tr>
    <tr><td class="paramname">id</td><td>ID of the entry. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Password as a string. </dd></dl>

<p class="definition">Definition at line <a class="el" href="db__manager_8c_source.html#l00247">247</a> of file <a class="el" href="db__manager_8c_source.html">db_manager.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  247</span>                                                 {</div>
<div class="line"><span class="lineno">  248</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *sql =</div>
<div class="line"><span class="lineno">  249</span>      <span class="stringliteral">&quot;SELECT password FROM Entry WHERE id = ? AND is_deleted = 0;&quot;</span>;</div>
<div class="line"><span class="lineno">  250</span>  sqlite3_stmt *stmt;</div>
<div class="line"><span class="lineno">  251</span>  <span class="keywordflow">if</span> (sqlite3_prepare_v2(db, sql, -1, &amp;stmt, 0) != SQLITE_OK) {</div>
<div class="line"><span class="lineno">  252</span>    fprintf(stderr, <span class="stringliteral">&quot;Failed to prepare statement\n&quot;</span>);</div>
<div class="line"><span class="lineno">  253</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  254</span>  }</div>
<div class="line"><span class="lineno">  255</span> </div>
<div class="line"><span class="lineno">  256</span>  sqlite3_bind_int(stmt, 1, <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>  <span class="keywordtype">char</span> *password = NULL;</div>
<div class="line"><span class="lineno">  259</span>  <span class="keywordflow">if</span> (sqlite3_step(stmt) == SQLITE_ROW) {</div>
<div class="line"><span class="lineno">  260</span>    password = strdup((<span class="keywordtype">char</span> *)sqlite3_column_text(stmt, 0));</div>
<div class="line"><span class="lineno">  261</span>  }</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>  sqlite3_finalize(stmt);</div>
<div class="line"><span class="lineno">  264</span>  <span class="keywordflow">return</span> password;</div>
<div class="line"><span class="lineno">  265</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3a9d473f8758bb940884b65a067fe33e" name="a3a9d473f8758bb940884b65a067fe33e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a9d473f8758bb940884b65a067fe33e">&#9670;&#160;</a></span>db_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sqlite3 * db_open </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>password</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens a database connection with a password. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Path to the database file. </td></tr>
    <tr><td class="paramname">password</td><td>Password for database encryption. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the opened SQLite database. </dd></dl>

<p class="definition">Definition at line <a class="el" href="db__manager_8c_source.html#l00399">399</a> of file <a class="el" href="db__manager_8c_source.html">db_manager.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  399</span>                                                             {</div>
<div class="line"><span class="lineno">  400</span>  sqlite3 *db;</div>
<div class="line"><span class="lineno">  401</span> </div>
<div class="line"><span class="lineno">  402</span>  <span class="comment">/* open/create database */</span></div>
<div class="line"><span class="lineno">  403</span>  <span class="keywordtype">int</span> rc = sqlite3_open(filename, &amp;db);</div>
<div class="line"><span class="lineno">  404</span>  <span class="keywordflow">if</span> (rc != SQLITE_OK) {</div>
<div class="line"><span class="lineno">  405</span>    fprintf(stderr, <span class="stringliteral">&quot;sqlite3_open failed!\n&quot;</span>);</div>
<div class="line"><span class="lineno">  406</span>    exit(EXIT_FAILURE);</div>
<div class="line"><span class="lineno">  407</span>  }</div>
<div class="line"><span class="lineno">  408</span> </div>
<div class="line"><span class="lineno">  409</span>  <a class="code hl_function" href="db__manager_8c.html#a858521d290aceedd44233a156c7d9ec2">_db_decrypt</a>(db, password);</div>
<div class="line"><span class="lineno">  410</span> </div>
<div class="line"><span class="lineno">  411</span>  <a class="code hl_function" href="db__manager_8c.html#a14c52d471dcea73205f58108b05f79be">_db_setup</a>(db); <span class="comment">// This must happen after decrypt!!</span></div>
<div class="line"><span class="lineno">  412</span> </div>
<div class="line"><span class="lineno">  413</span>  <span class="keywordflow">return</span> db;</div>
<div class="line"><span class="lineno">  414</span>}</div>
<div class="ttc" id="adb__manager_8c_html_a14c52d471dcea73205f58108b05f79be"><div class="ttname"><a href="db__manager_8c.html#a14c52d471dcea73205f58108b05f79be">_db_setup</a></div><div class="ttdeci">void _db_setup(sqlite3 *db)</div><div class="ttdoc">Sets up the initial database schema. For internal use.</div><div class="ttdef"><b>Definition</b> <a href="db__manager_8c_source.html#l00356">db_manager.c:356</a></div></div>
<div class="ttc" id="adb__manager_8c_html_a858521d290aceedd44233a156c7d9ec2"><div class="ttname"><a href="db__manager_8c.html#a858521d290aceedd44233a156c7d9ec2">_db_decrypt</a></div><div class="ttdeci">void _db_decrypt(sqlite3 *db, const char *password)</div><div class="ttdoc">Decrypts the database using the provided password.</div><div class="ttdef"><b>Definition</b> <a href="db__manager_8c_source.html#l00390">db_manager.c:390</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h_a3a9d473f8758bb940884b65a067fe33e_cgraph.png" border="0" usemap="#adb__manager_8h_a3a9d473f8758bb940884b65a067fe33e_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a37529c9085cd64ba970e70b928628603" name="a37529c9085cd64ba970e70b928628603"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37529c9085cd64ba970e70b928628603">&#9670;&#160;</a></span>db_write_entry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int db_write_entry </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structEntry.html">Entry</a></td>          <td class="paramname"><span class="paramname"><em>entry</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a new entry into the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Pointer to the SQLite database connection. </td></tr>
    <tr><td class="paramname">entry</td><td>Struct containing the entry data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="db__manager_8c_source.html#l00150">150</a> of file <a class="el" href="db__manager_8c_source.html">db_manager.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  150</span>                                             {</div>
<div class="line"><span class="lineno">  151</span>  <span class="keywordflow">if</span> (entry.<a class="code hl_variable" href="structEntry.html#aa5d205a77ff70e820e536617e4ee480d">id</a> != -1) {</div>
<div class="line"><span class="lineno">  152</span>    fprintf(stderr,</div>
<div class="line"><span class="lineno">  153</span>            <span class="stringliteral">&quot;Your entry.id isn&#39;t -1. That could mean, that your entry is &quot;</span></div>
<div class="line"><span class="lineno">  154</span>            <span class="stringliteral">&quot;retrieved from the database and already exists.\n&quot;</span></div>
<div class="line"><span class="lineno">  155</span>            <span class="stringliteral">&quot;Please set it to -1 before writing if you want to write it.&quot;</span>);</div>
<div class="line"><span class="lineno">  156</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  157</span>  }</div>
<div class="line"><span class="lineno">  158</span>  sqlite3_stmt *stmt;</div>
<div class="line"><span class="lineno">  159</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *sql =</div>
<div class="line"><span class="lineno">  160</span>      <span class="stringliteral">&quot;INSERT INTO Entry(name, user_name, password) VALUES(?, ?, ?);&quot;</span>;</div>
<div class="line"><span class="lineno">  161</span>  <span class="keywordtype">int</span> rc = sqlite3_prepare_v2(db, sql, -1, &amp;stmt, NULL);</div>
<div class="line"><span class="lineno">  162</span>  <span class="keywordflow">if</span> (rc != SQLITE_OK) {</div>
<div class="line"><span class="lineno">  163</span>    fprintf(stderr, <span class="stringliteral">&quot;Failed to prepare statement: %s\n&quot;</span>, sqlite3_errmsg(db));</div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  165</span>  }</div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>  sqlite3_bind_text(stmt, 1, entry.<a class="code hl_variable" href="structEntry.html#a272e382d3efed5f970c7939742ec9603">name</a>, -1, SQLITE_STATIC);</div>
<div class="line"><span class="lineno">  168</span>  sqlite3_bind_text(stmt, 2, entry.<a class="code hl_variable" href="structEntry.html#a73f44a1b396afac536575508c8b8e062">user_name</a>, -1, SQLITE_STATIC);</div>
<div class="line"><span class="lineno">  169</span>  sqlite3_bind_text(stmt, 3, entry.<a class="code hl_variable" href="structEntry.html#a6972a257b870d8978ff435557b5e69bd">password</a>, -1, SQLITE_STATIC);</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>  rc = sqlite3_step(stmt);</div>
<div class="line"><span class="lineno">  172</span>  <span class="keywordflow">if</span> (rc != SQLITE_DONE) {</div>
<div class="line"><span class="lineno">  173</span>    fprintf(stderr, <span class="stringliteral">&quot;Execution failed: %s\n&quot;</span>, sqlite3_errmsg(db));</div>
<div class="line"><span class="lineno">  174</span>    sqlite3_finalize(stmt);</div>
<div class="line"><span class="lineno">  175</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  176</span>  }</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>  sqlite3_finalize(stmt);</div>
<div class="line"><span class="lineno">  179</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  180</span>}</div>
<div class="ttc" id="astructEntry_html_a6972a257b870d8978ff435557b5e69bd"><div class="ttname"><a href="structEntry.html#a6972a257b870d8978ff435557b5e69bd">Entry::password</a></div><div class="ttdeci">char * password</div><div class="ttdef"><b>Definition</b> <a href="entry_8h_source.html#l00015">entry.h:15</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h_a37529c9085cd64ba970e70b928628603_icgraph.png" border="0" usemap="#adb__manager_8h_a37529c9085cd64ba970e70b928628603_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a5930f7e3021559ebf5286dea58ee64fb" name="a5930f7e3021559ebf5286dea58ee64fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5930f7e3021559ebf5286dea58ee64fb">&#9670;&#160;</a></span>db_write_entryDetail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int db_write_entryDetail </td>
          <td>(</td>
          <td class="paramtype">sqlite3 *</td>          <td class="paramname"><span class="paramname"><em>db</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structEntryDetail.html">EntryDetail</a></td>          <td class="paramname"><span class="paramname"><em>entry_detail</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a new entry detail into the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>Pointer to the SQLite database connection. </td></tr>
    <tr><td class="paramname">entry_detail</td><td>Struct containing the entry detail data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="db__manager_8c_source.html#l00111">111</a> of file <a class="el" href="db__manager_8c_source.html">db_manager.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  111</span>                                                                {</div>
<div class="line"><span class="lineno">  112</span>  <span class="keywordflow">if</span> (entry_detail.<a class="code hl_variable" href="structEntryDetail.html#ad3978edac40ab48b0e1167a755559f02">id</a> != -1) {</div>
<div class="line"><span class="lineno">  113</span>    fprintf(stderr,</div>
<div class="line"><span class="lineno">  114</span>            <span class="stringliteral">&quot;Your EntryDetail.id isn&#39;t -1. That could mean, that your &quot;</span></div>
<div class="line"><span class="lineno">  115</span>            <span class="stringliteral">&quot;EntryDetail is retrieved from the database and already exists.\n &quot;</span></div>
<div class="line"><span class="lineno">  116</span>            <span class="stringliteral">&quot;Please set it to -1 before writing if you want to write it.&quot;</span>);</div>
<div class="line"><span class="lineno">  117</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  118</span>  }</div>
<div class="line"><span class="lineno">  119</span> </div>
<div class="line"><span class="lineno">  120</span>  sqlite3_stmt *stmt;</div>
<div class="line"><span class="lineno">  121</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *sql = <span class="stringliteral">&quot;INSERT INTO EntryDetails(f_entry_id, type, content, &quot;</span></div>
<div class="line"><span class="lineno">  122</span>                    <span class="stringliteral">&quot;size) VALUES (?, ?, ?, ?);&quot;</span>;</div>
<div class="line"><span class="lineno">  123</span>  <span class="keywordtype">int</span> rc;</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>  rc = sqlite3_prepare_v2(db, sql, -1, &amp;stmt, 0);</div>
<div class="line"><span class="lineno">  126</span>  <span class="keywordflow">if</span> (rc != SQLITE_OK) {</div>
<div class="line"><span class="lineno">  127</span>    fprintf(stderr, <span class="stringliteral">&quot;Failed to prepare statement: %s\n&quot;</span>, sqlite3_errmsg(db));</div>
<div class="line"><span class="lineno">  128</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  129</span>  }</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>  sqlite3_bind_int(stmt, 1, entry_detail.<a class="code hl_variable" href="structEntryDetail.html#a849f762b05ab750c52d3ab44a9ad9388">f_entry_id</a>);</div>
<div class="line"><span class="lineno">  132</span>  sqlite3_bind_text(stmt, 2, entry_detail.<a class="code hl_variable" href="structEntryDetail.html#aa6efdde7252c152b9715663ae222b74e">content</a>-&gt;<a class="code hl_variable" href="structIContent.html#ad6f9f3b297b4804b8b9e02554675725b">type</a>, -1, SQLITE_TRANSIENT);</div>
<div class="line"><span class="lineno">  133</span>  <span class="keywordflow">if</span> (strcmp(entry_detail.<a class="code hl_variable" href="structEntryDetail.html#aa6efdde7252c152b9715663ae222b74e">content</a>-&gt;<a class="code hl_variable" href="structIContent.html#ad6f9f3b297b4804b8b9e02554675725b">type</a>, <span class="stringliteral">&quot;text&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno">  134</span>    sqlite3_bind_text(stmt, 3, entry_detail.<a class="code hl_variable" href="structEntryDetail.html#aa6efdde7252c152b9715663ae222b74e">content</a>-&gt;<a class="code hl_variable" href="structIContent.html#a4ab57de965cd12f71014fa3d2178a613">data</a>.<a class="code hl_variable" href="structIContent.html#a513b32028efdf180f944ec78b8127ee2">text</a>, -1,</div>
<div class="line"><span class="lineno">  135</span>                      SQLITE_TRANSIENT);</div>
<div class="line"><span class="lineno">  136</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  137</span>    sqlite3_bind_text(stmt, 3, entry_detail.<a class="code hl_variable" href="structEntryDetail.html#aa6efdde7252c152b9715663ae222b74e">content</a>-&gt;<a class="code hl_variable" href="structIContent.html#a4ab57de965cd12f71014fa3d2178a613">data</a>.<a class="code hl_variable" href="structIContent.html#ab65571882f3ddf0ecfdfcb514f56bba8">blob</a>,</div>
<div class="line"><span class="lineno">  138</span>                      (<span class="keywordtype">int</span>)entry_detail.<a class="code hl_variable" href="structEntryDetail.html#aa6efdde7252c152b9715663ae222b74e">content</a>-&gt;<a class="code hl_variable" href="structIContent.html#a513f3c5719119ae574904849b127bad0">size</a>, SQLITE_TRANSIENT);</div>
<div class="line"><span class="lineno">  139</span>  }</div>
<div class="line"><span class="lineno">  140</span>  sqlite3_bind_int(stmt, 4, (<span class="keywordtype">int</span>)entry_detail.<a class="code hl_variable" href="structEntryDetail.html#aa6efdde7252c152b9715663ae222b74e">content</a>-&gt;<a class="code hl_variable" href="structIContent.html#a513f3c5719119ae574904849b127bad0">size</a>);</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>  rc = sqlite3_step(stmt);</div>
<div class="line"><span class="lineno">  143</span>  <span class="keywordflow">if</span> (rc != SQLITE_DONE) {</div>
<div class="line"><span class="lineno">  144</span>    fprintf(stderr, <span class="stringliteral">&quot;Failed to execute statment: %s\n&quot;</span>, sqlite3_errmsg(db));</div>
<div class="line"><span class="lineno">  145</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  146</span>  }</div>
<div class="line"><span class="lineno">  147</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  148</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="db__manager_8h_a5930f7e3021559ebf5286dea58ee64fb_icgraph.png" border="0" usemap="#adb__manager_8h_a5930f7e3021559ebf5286dea58ee64fb_icgraph" alt=""/></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="db__manager_8h.html">db_manager.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.0 </li>
  </ul>
</div>
</body>
</html>
